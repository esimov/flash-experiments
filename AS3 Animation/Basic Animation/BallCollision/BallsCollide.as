package {	import flash.events.Event;	import flash.display.Sprite;		public class BallsCollide extends Sprite {		private var balls:Ball;		private var ballsBin:Array;		private var numBalls:Number = 15;		private var centerBall:Ball;		private var bounce:Number = -0.7;		private var spring:Number = 0.17;				public function BallsCollide():void {			init();		}				private function init():void {			ballsBin = new Array();			centerBall = new Ball(60, Math.random() * 0xffffff);			addChild(centerBall);			centerBall.x = stage.stageWidth * 0.5;			centerBall.y = stage.stageHeight * 0.5;			for (var i:uint = 0; i<numBalls; i++) {				balls = new Ball(Math.random() * 20 + 20, Math.random() * 0xffffff);				balls.x = Math.random() * stage.stageWidth;				balls.y = Math.random() * stage.stageHeight;				balls.vx = Math.random() * 6 - 3;				balls.vy = Math.random() * 6 - 3;				addChild(balls);				ballsBin.push(balls);			}			addEventListener(Event.ENTER_FRAME, onStartPlay);		}				private function onStartPlay(evt:Event):void {			for (var i:uint = 0; i<ballsBin.length; i++) {				var balls:Ball = ballsBin[i] as Ball;				moveBall(balls);				var dx:Number = balls.x - centerBall.x;				var dy:Number = balls.y - centerBall.y;				var dist:Number = Math.sqrt(dx*dx + dy*dy);				var minDist:Number = balls.radius + centerBall.radius;				if (dist < minDist) {					var angle:Number = Math.atan2(dy, dx);					var targetX:Number = balls.x + Math.cos(angle) * minDist;					var targetY:Number = balls.y + Math.sin(angle) * minDist;					balls.vx += (targetX - balls.x) * spring;					balls.vy += (targetY - balls.y) * spring;				}			}		}				function moveBall(balls:Ball):void {			balls.x += balls.vx;			balls.y += balls.vy;			if (balls.x - balls.radius < 0) {				balls.x = 0 + balls.radius;				balls.vx *= bounce;			}			if (balls.x + balls.radius > stage.stageWidth) {				balls.x = stage.stageWidth - balls.radius;				balls.vx *= bounce;			}			if (balls.y - balls.radius < 0) {				balls.y = 0 + balls.radius;				balls.vy *= bounce;			}			if (balls.y + balls.radius > stage.stageHeight) {				balls.y = stage.stageHeight - balls.radius;				balls.vy *= bounce;			}		}	}	}