package {	import flash.display.Sprite;	import flash.events.Event;	import flash.geom.Rectangle;	import flash.geom.Point;		public class Walk extends Sprite {		private var segment1:Segment;		private var segment2:Segment;		private var segment3:Segment;		private var segment4:Segment;		private var segment5:Segment;				private var slider1:SimpleSlider;		private var slider2:SimpleSlider;		private var slider3:SimpleSlider;		private var slider4:SimpleSlider;				private var angleV:Number = 0;		private var offset:Number = - Math.PI/2;				public function Walk():void {			init();		}				private function init():void {			segment1 = new Segment(100, 30, 0xdddddd);			segment1.x = stage.stageWidth/2;			segment1.y = stage.stageHeight/2.2;			addChild(segment1);						segment2 = new Segment(100, 20);			segment2.x = segment1.getPivot().x;			segment2.y = segment1.getPivot().y;			addChild(segment2);						segment3 = new Segment(100, 30, 0xdddddd);			segment3.x = stage.stageWidth/2;			segment3.y = stage.stageHeight/2.2;			addChild(segment3);						segment4 = new Segment(100, 20);			segment4.x = segment3.getPivot().x;			segment4.y = segment3.getPivot().y;			addChild(segment4);								//speed Slider			slider1 = new SimpleSlider(0.1, 0.5, 0.25);			slider1.x = 20;			slider1.y = 50;			addChild(slider1);			slider1.addEventListener(Event.CHANGE, onSliderChange);						//upper segment angle			slider2 = new SimpleSlider(20, 80, 45);			slider2.x = slider1.x + 20;			slider2.y = 50;			addChild(slider2);			slider2.addEventListener(Event.CHANGE, onSliderChange);						//lower segment angle			slider3 = new SimpleSlider(50, 90, 90);			slider3.x = slider2.x + 20;			slider3.y = 50;			addChild(slider3);			slider3.addEventListener(Event.CHANGE, onSliderChange);									slider4 = new SimpleSlider(-3.14, 3.14, offset);			slider4.x = slider3.x + 20;			slider4.y = 50;			addChild(slider4);			slider4.addEventListener(Event.CHANGE, onSliderChange);						addEventListener(Event.ENTER_FRAME, onStartEvent);					}				private function onStartEvent (evt:Event):void {			addGravity();			legs (segment1, segment2, angleV);			legs (segment3, segment4, angleV + Math.PI);			angleV += slider1.value;			checkFloor(segment2);			checkFloor(segment4);		}				private function legs (segment1:Segment, segment2:Segment, angleV:Number):void {			var angle1:Number = Math.sin(angleV) * slider2.value + slider3.value;			var angle2:Number = Math.sin(angleV + slider4.value) * slider2.value + slider3.value;			segment1.rotation = angle1;			segment2.rotation = segment1.rotation + angle2;			segment2.x = segment1.getPivot().x;			segment2.y = segment1.getPivot().y;		}				private function addGravity():void {			segment1.y += segment1.vy;			segment2.y += segment2.vy;			segment3.y += segment3.vy;			segment4.y += segment4.vy;		}				private function checkFloor(segment:Segment):void {			var rect:Rectangle = segment.getBounds(this);			var maxPoint:Number = rect.bottom;			if (maxPoint > stage.stageHeight) {				var distY:Number = maxPoint - stage.stageHeight;				segment1.y -= distY;				segment2.y -= distY;				segment3.y -= distY;				segment4.y -= distY;			}		}				private function onSliderChange(evt:Event):void {					}	}}